# Scheduling CloudLets on CloudSim  
This is an example usage of CloudSim to schedule CloudLets on virtual Data Centers.  
  
## Description of CloudSim classes  
  
The CloudSim simulator comes with some core classes which model entities in a Data Center. Here is how the classes tie up together: The `Cloudlet` class represents tasks provided by clients to be scheduled onto `Host`'s inside a `Datacenter`. Each `Host` is running Virtual Machines (`Vm`'s) which will run the `Cloudlet`. In order to schedule these `Cloudlet`s a `Broker` is involved which acts as a middle man between the client and the Cloud Service Provider.  
  
The `Broker` schedules the tasks either using temporal or spatial multiplexing. `CloudletSchedulerSpaceShared` and `CloudletSchedulerTimeShared` classes represent the different scheduling techniques.  
  
## My implementation  
  
The following is a description of the classes that I have implemented:  
  
### `Client`  
Represents a customer that requests services and resources from the cloud service provider. The `Client` is responsible for dynamically generating a predetermined number of jobs (`Cloudlets`) which are characteristic to only a single `Client` instance. For the simulations that I have performed, each `Client` is unique in that it produces a different type of jobs.  
  
### `Server` (cloud provider)  
It's an umbrella class representing the cloud provider. The `Server` is responsible for spawning the data centers along with their underlying `Host`s and the data `Broker` that is responsible for assigning jobs (`Cloudlet`s) across all the data centers of this provider. The `Server` exposes a single function `getDCP()` that is used to submit `Cloudlet`s to the cloud provider.  
  
### Randomization  
  
All the jobs are dynamically generated by the `Client` and submitted to the the cloud `Broker` which decides the host to which to assign the job while the simulator already has jobs under execution. This simulates a real world scenario.  
  
## Results  
  
The main responsibility of the scheduler is to keep the bare metal hardware resources busy and to be used effectively as well as efficiently. For our simulations, we have employed the following scheduling policies:  
  
* **Space-sharing**: Resources are dedicated to specific tasks until they are completed. Only then would the resource be released. If all the resources have been utilized, the jobs are pushed into a queue to await their turn.  
  
* **Time-shared**: This is similar to a round robin execution in which resources are shared among tasks. The tasks are allotted a resource for a specified time until the time slice is over. The current execution is then paused and the resource is released and allocated to another task. The cycle persists till the time all the workloads are executed.

The space-sharing and time-sharing characteristics pertain to two classes, namely: `Vm` and  `Cloudlet`. The results below pertain to space-sharing in both classes:

| Datacenters | Hosts | CloudLets | Avg Completion Time | CPU Cost($) | BW Cost($) | Total Cost($) |
|-------------|-------|-----------|---------------------|-------------|------------|---------------|
| 1           | 10    | 1000      | 136.7               | 410.12      | 30         | 440.12        |
|             |       | 2000      | 266.13              | 832.75      | 30         | 862.75        |
|             | 20    | 1000      | 70.54               | 211.62      | 30         | 241.62        |
|             |       | 2000      | 130.11              | 404.98      | 30         | 434.98        |
|             | 30    | 1000      | 48.35               | 145.07      | 30         | 175.07        |
|             |       | 2000      | 90.6                | 275.2485    | 30         | 305.248       |
| 2           | 10    | 1000      | 131.5608            | 394.682     | 30         | 424.6825      |
|             |       | 2000      | 277.58              | 832.75      | 30         | 862.75        |
|             | 20    | 1000      | 70.92               | 212.76      | 30         | 242.76        |
|             |       | 2000      | 134.9               | 404.98      | 30         | 434.98        |
|             | 30    | 1000      | 46.9159             | 140.747771  | 30         | 170.747       |
|             |       | 2000      | 91.7                | 275.2485    | 30         | 305.248       |
| 3           | 10    | 1000      | 136.790554          | 410.371662  | 30         | 440.371662    |
|             |       | 2000      | 277.4               | 832.2329    | 30         | 862.2329      |
|             | 20    | 1000      | 69.7075             | 209.122563  | 30         | 239.122563    |
|             |       | 2000      | 137.47814           | 412.434441  | 30         | 442.43        |
|             | 30    | 1000      | 47.1306             | 141.3918    | 30         | 171.3918      |
|             |       | 2000      | 96.21361            | 288.64085   | 30         | 318.640856    |

The results below pertain to time-sharing in both classes:

| Datacenters | VMs | CloudLets | Avg Completion Time | CPU Cost($) | BW Cost ($) | Total Cost($) |
|-------------|-----|-----------|---------------------|-------------|-------------|---------------|
| 1           | 10  | 1000      | 2.05                | 6.15        | 30          | 36.15         |
|             |     | 2000      | 2.06                | 6.18        | 30          | 36.18         |
|             | 20  | 1000      | 2.09                | 6.27        | 30          | 36.27         |
|             |     | 2000      | 2.08                | 6.24        | 30          | 36.24         |
|             | 30  | 1000      | 2.03                | 6.1         | 30          | 36.1          |
|             |     | 2000      | 2.08                | 6.25        | 30          | 36.25         |
| 2           | 10  | 1000      | 2.1                 | 6.3         | 30          | 36.3          |
|             |     | 2000      | 2.05                | 6.16        | 30          | 36.16         |
|             | 20  | 1000      | 2.05                | 6.15        | 30          | 36.15         |
|             |     | 2000      | 2.1                 | 6.3         | 30          | 36.3          |
|             | 30  | 1000      | 2.05                | 6.17        | 30          | 36.17         |
|             |     | 2000      | 2.06                | 6.18        | 30          | 36.18         |
| 3           | 10  | 1000      | 2.05                | 6.3         | 30          | 36.3          |
|             |     | 2000      | 2.05                | 6.16        | 30          | 36.16         |
|             | 20  | 1000      | 2.04                | 6.15        | 30          | 36.15         |
|             |     | 2000      | 2.1                 | 6.24        | 30          | 36.24         |
|             | 30  | 1000      | 2.05                | 6.1         | 30          | 36.1          |
|             |     | 2000      | 2.02                | 6.25        | 30          | 36.25         |

While keeping these results in mind, it is clear that space-shared provides better results in terms of both time and cost. Since the resources presented by the Cloud Service Provider are significant, the tasks also finish up faster and hence utilize resources for a small amount of time hence accumulating a lower cost. The cost for bandwidth is standard as we have used the Full utilization model in our simulations where we utilize the entirety of our bandwidth. 